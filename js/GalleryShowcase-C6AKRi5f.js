var ge=Object.defineProperty,he=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var re=(t,n,e)=>n in t?ge(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,_=(t,n)=>{for(var e in n||(n={}))be.call(n,e)&&re(t,e,n[e]);if(ne)for(var e of ne(n))ye.call(n,e)&&re(t,e,n[e]);return t},G=(t,n)=>he(t,pe(n));import{j as i,P as c,f as xe,g as Ce,l as we,s as ve}from"./index-DlIuYEQ-.js";import{b as a,R as H}from"./vendor-DBH3HeL0.js";function ce({categories:t,activeCategory:n,onCategoryChange:e}){const[s,o]=a.useState(0),r=a.useRef(null),u=a.useRef([]),f=a.useMemo(()=>{const l=[...t];l.sort((m,y)=>{const k=Number.isFinite(Number(m.order))?Number(m.order):0,N=Number.isFinite(Number(y.order))?Number(y.order):0;return k===N?(m.name||"").localeCompare(y.name||"","sv"):k-N});const d=l.findIndex(m=>m.id==="alla");if(d>0){const[m]=l.splice(d,1);l.unshift(m)}return l},[t]);a.useEffect(()=>{const l=f.findIndex(d=>d.id===n);l!==-1&&o(l)},[n,f]),a.useEffect(()=>{if(u.current[s]&&r.current){const l=u.current[s],d=r.current;if(d.scrollWidth>d.clientWidth){const m=l.offsetLeft,y=l.offsetWidth,k=d.clientWidth,N=m-k/2+y/2;d.scrollTo({left:N,behavior:"smooth"})}}},[s]);const p=(l,d)=>{o(d),e(l.id)},b=(l,d)=>{if(!f.length)return;let m=d;if(l.key==="ArrowRight")m=(d+1)%f.length;else if(l.key==="ArrowLeft")m=(d-1+f.length)%f.length;else if(l.key==="Home")m=0;else if(l.key==="End")m=f.length-1;else return;l.preventDefault();const y=f[m];y&&(o(m),e(y.id),u.current[m]&&u.current[m].focus())};return i.jsx("div",{className:"category-toggle",children:i.jsx("div",{className:"category-toggle-container",ref:r,children:f.map((l,d)=>i.jsxs("button",{ref:m=>u.current[d]=m,className:`category-button ${d===s?"active":""}`,type:"button",onClick:()=>p(l,d),onKeyDown:m=>b(m,d),"aria-pressed":d===s,"aria-current":d===s?"true":"false","aria-label":`Visa ${l.name} (${l.images.length} bilder)`,children:[i.jsx("span",{className:"category-name",children:l.name}),i.jsxs("span",{className:"category-count",children:["(",l.images.length,")"]})]},l.id))})})}ce.propTypes={categories:c.arrayOf(c.shape({id:c.string.isRequired,name:c.string.isRequired,images:c.array.isRequired})).isRequired,activeCategory:c.string.isRequired,onCategoryChange:c.func.isRequired};function Ne(t,n){if(t==null)return{};var e=ke(t,n),s,o;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)s=r[o],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(e[s]=t[s])}return e}function ke(t,n){if(t==null)return{};var e={},s=Object.keys(t),o,r;for(r=0;r<s.length;r++)o=s[r],!(n.indexOf(o)>=0)&&(e[o]=t[o]);return e}function W(){return W=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},W.apply(this,arguments)}function oe(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,s)}return e}function B(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?oe(Object(e),!0).forEach(function(s){Ie(t,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):oe(Object(e)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))})}return t}function Ie(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}const je={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},Y=2;class F extends H.Component{constructor(n){super(n),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this);let e;this.props.breakpointCols&&this.props.breakpointCols.default?e=this.props.breakpointCols.default:e=parseInt(this.props.breakpointCols)||Y,this.state={columnCount:e}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){const n=window&&window.innerWidth||1/0;let e=this.props.breakpointCols;typeof e!="object"&&(e={default:parseInt(e)||Y});let s=1/0,o=e.default||Y;for(let r in e){const u=parseInt(r);u>0&&n<=u&&u<s&&(s=u,o=e[r])}o=Math.max(1,parseInt(o)||1),this.state.columnCount!==o&&this.setState({columnCount:o})}itemsInColumns(){const n=this.state.columnCount,e=new Array(n),s=H.Children.toArray(this.props.children);for(let o=0;o<s.length;o++){const r=o%n;e[r]||(e[r]=[]),e[r].push(s[o])}return e}renderColumns(){const{column:n,columnAttrs:e={},columnClassName:s}=this.props,o=this.itemsInColumns(),r=`${100/o.length}%`;let u=s;u&&typeof u!="string"&&(this.logDeprecated('The property "columnClassName" requires a string'),typeof u=="undefined"&&(u="my-masonry-grid_column"));const f=B(B(B({},n),e),{},{style:B(B({},e.style),{},{width:r}),className:u});return o.map((p,b)=>H.createElement("div",W({},f,{key:b}),p))}logDeprecated(n){console.error("[Masonry]",n)}render(){const n=this.props,{children:e,breakpointCols:s,columnClassName:o,columnAttrs:r,column:u,className:f}=n,p=Ne(n,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let b=f;return typeof f!="string"&&(this.logDeprecated('The property "className" requires a string'),typeof f=="undefined"&&(b="my-masonry-grid")),H.createElement("div",W({},p,{className:b}),this.renderColumns())}}F.defaultProps=je;const le={default:3,768:2};function J({images:t,isLoading:n,onImageSelect:e,categoryName:s}){return n?i.jsx(F,{breakpointCols:le,className:"gallery-grid",columnClassName:"gallery-column",children:[...Array(6)].map((o,r)=>i.jsx("div",{className:"gallery-thumbnail skeleton-item",children:i.jsx("div",{className:"skeleton-image",style:{height:`${200+r%3*50}px`}})},r))}):i.jsx(F,{breakpointCols:le,className:"gallery-grid",columnClassName:"gallery-column",children:t.slice(0,6).map((o,r)=>i.jsx("div",{className:"gallery-thumbnail",onClick:()=>e(r),role:"button",tabIndex:0,"aria-label":`Öppna bild ${r+1} av ${t.length} i lightbox`,onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),e(r))},children:i.jsx("img",{src:o.thumbnail,alt:o.thumbnailAlt,loading:"eager"})},o.filename||o.original||r))})}J.propTypes={images:c.arrayOf(c.shape({thumbnail:c.string,thumbnailAlt:c.string,filename:c.string,original:c.string})).isRequired,isLoading:c.bool.isRequired,onImageSelect:c.func.isRequired,categoryName:c.string};J.defaultProps={categoryName:"Alla"};const Re={default:3,768:2};function Q({images:t,startIndex:n,totalCount:e,onImageSelect:s,categoryName:o,buttonMode:r,onToggle:u,containerRef:f,buttonRef:p}){return i.jsxs("div",{className:"expanded-gallery-container",ref:f,children:[i.jsx("div",{className:"gallery-sentinel sentinel-top","aria-hidden":"true"}),i.jsx(F,{breakpointCols:Re,className:"gallery-grid expanded-grid",columnClassName:"gallery-column",id:"expanded-gallery",children:t.map((b,l)=>{const d=l+n;return i.jsx("div",{className:"gallery-thumbnail",onClick:()=>s(d),role:"button",tabIndex:0,"aria-label":`Öppna bild ${d+1} av ${e} i lightbox`,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),s(d))},children:i.jsx("img",{src:b.thumbnail,alt:b.thumbnailAlt,loading:"lazy"})},d)})}),i.jsx("div",{className:"gallery-sentinel sentinel-bottom","aria-hidden":"true"}),i.jsx("button",{ref:p,className:`hide-images-button ${r==="fixed"?"is-fixed":""} ${r==="bottom"?"at-bottom":""} ${r==="hidden"?"is-hidden":""}`,onClick:u,"aria-label":"Dölj utökade galleri bilder","aria-hidden":r==="hidden",children:"Dölj bilder"})]})}Q.propTypes={images:c.arrayOf(c.shape({thumbnail:c.string,thumbnailAlt:c.string})).isRequired,startIndex:c.number,totalCount:c.number,onImageSelect:c.func.isRequired,categoryName:c.string,buttonMode:c.string.isRequired,onToggle:c.func.isRequired,containerRef:c.shape({current:c.any}),buttonRef:c.shape({current:c.any})};Q.defaultProps={startIndex:6,totalCount:0,categoryName:"Alla",containerRef:{current:null},buttonRef:{current:null}};function X({isOpen:t,images:n,currentIndex:e,currentImage:s,onClose:o,onNext:r,onPrevious:u,onSelectImage:f,dialogRef:p,closeButtonRef:b,categories:l,activeCategory:d,onCategoryChange:m}){const[y,k]=a.useState(!1),[N,S]=a.useState(null),[R,h]=a.useState(null),x=a.useRef(null),I=a.useRef(null),C=50;a.useEffect(()=>{x.current&&(typeof p=="function"?p(x.current):p&&(p.current=x.current))},[p]),a.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),a.useEffect(()=>{if(!t)return;const g=j=>{switch(j.key){case"ArrowRight":r();break;case"ArrowLeft":u();break;case"Escape":o();break;case" ":j.preventDefault(),k(L=>!L);break}};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[t,r,u,o]);const v=g=>{h(null),S(g.targetTouches[0].clientX)},E=g=>{h(g.targetTouches[0].clientX)},A=()=>{if(!N||!R)return;const g=N-R,j=g>C,L=g<-C;j&&n.length>1?r():L&&n.length>1&&u()},O=g=>{g.stopPropagation(),k(j=>!j)};if(!t||!n||!s)return null;const T=e+1,P=n.length;return i.jsx("div",{className:`gallery-model ${y?"is-immersive":""}`,role:"dialog","aria-modal":"true","aria-labelledby":"gallery-heading",ref:x,onMouseDown:g=>{g.target===g.currentTarget&&o()},children:i.jsxs("div",{className:"gallery-model-content",children:[i.jsxs("div",{className:"sr-only",children:["Bildgalleri med ",P," bilder. Använd pilarna eller swipa för att navigera. Tryck på bilden för helskärm."]}),i.jsxs("div",{className:`lightbox-controls ${y?"is-hidden":""}`,children:[i.jsxs("div",{className:"lightbox-header-left",children:[i.jsxs("span",{className:"lightbox-counter",children:[T," / ",P]}),l&&m&&i.jsx("div",{className:"lightbox-categories desktop-only",children:l.map(g=>i.jsx("button",{className:`lightbox-category-btn ${d===g.id?"is-active":""}`,onClick:j=>{j.stopPropagation(),d!==g.id&&m(g.id)},children:g.name},g.id))})]}),i.jsx("button",{className:"gallery-close-button",onClick:o,"aria-label":"Stäng bildgalleri",ref:b,children:"×"})]}),i.jsxs("div",{className:"lightbox-stage",onTouchStart:v,onTouchMove:E,onTouchEnd:A,children:[n.length>1&&i.jsx("button",{type:"button",className:`lightbox-nav lightbox-nav--prev ${y?"is-hidden":""}`,onClick:g=>{g.stopPropagation(),u()},"aria-label":"Föregående bild",children:"‹"}),i.jsx("figure",{className:"lightbox-image-wrapper",children:i.jsx("img",{ref:I,src:s.original,alt:s.originalAlt||"Bild i galleriet",loading:"eager",onClick:O,className:"lightbox-image",style:{opacity:1}})}),n.length>1&&i.jsx("button",{type:"button",className:`lightbox-nav lightbox-nav--next ${y?"is-hidden":""}`,onClick:g=>{g.stopPropagation(),r()},"aria-label":"Nästa bild",children:"›"})]}),!y&&n.length>1&&i.jsxs("div",{className:"lightbox-footer",children:[l&&m&&i.jsx("div",{className:"lightbox-categories mobile-only",children:l.map(g=>i.jsx("button",{className:`lightbox-category-btn ${d===g.id?"is-active":""}`,onClick:j=>{j.stopPropagation(),d!==g.id&&m(g.id)},children:g.name},g.id))}),i.jsx("div",{className:"lightbox-thumbnails",role:"list",children:n.map((g,j)=>{var M;const L=j===e;return i.jsx("button",{type:"button",className:`lightbox-thumbnail ${L?"is-active":""}`,onClick:K=>{K.stopPropagation(),f(j)},"aria-label":`Gå till bild ${j+1}`,"aria-current":L||void 0,children:i.jsx("img",{src:g.thumbnail,alt:"",loading:"lazy"})},(M=g.filename)!=null?M:j)})}),i.jsx("p",{className:"lightbox-hint mobile-only",children:"Swipa för att bläddra • Tryck för helskärm"})]})]})})}X.propTypes={isOpen:c.bool.isRequired,images:c.array.isRequired,currentIndex:c.number.isRequired,currentImage:c.object,onClose:c.func.isRequired,onNext:c.func.isRequired,onPrevious:c.func.isRequired,onSelectImage:c.func.isRequired,activeCategory:c.string,onCategoryChange:c.func,categories:c.array,dialogRef:c.any,closeButtonRef:c.any};const Ee={default:3,768:2};function ue({images:t,onImageSelect:n}){return!t||t.length===0?null:i.jsxs("div",{className:"featured-gallery",children:[i.jsx(F,{breakpointCols:Ee,className:"gallery-grid",columnClassName:"gallery-column",children:t.map((e,s)=>{var o;return i.jsx("div",{className:"gallery-thumbnail",onClick:()=>n(s),role:"button",tabIndex:0,"aria-label":`Öppna utvald bild ${s+1} av ${t.length} i lightbox`,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),n(s))},children:i.jsx("img",{src:e.thumbnail,alt:e.thumbnailAlt,loading:"eager"})},(o=e.filename)!=null?o:s)})}),i.jsx("div",{className:"featured-divider","aria-hidden":"true"})]})}ue.propTypes={images:c.arrayOf(c.shape({thumbnail:c.string,thumbnailAlt:c.string,description:c.string,filename:c.string})).isRequired,onImageSelect:c.func.isRequired};const Ae=["a[href]","area[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),V=(t,n)=>{if(n===0)return 0;const e=t%n;return e<0?e+n:e};function se(t,n){const[e,s]=a.useState(!1),[o,r]=a.useState(0),u=a.useRef(null),f=a.useRef(null),p=a.useRef(null),b=a.useRef(new Set),l=t.length>0,d=a.useCallback(h=>{l&&(p.current=document.activeElement,r(V(h,t.length)),s(!0))},[l,t.length]),m=a.useCallback(()=>{s(!1)},[]),y=a.useCallback(h=>{l&&r(V(h,t.length))},[l,t.length]),k=a.useCallback(()=>{l&&r(h=>(h+1)%t.length)},[l,t.length]),N=a.useCallback(()=>{l&&r(h=>(h-1+t.length)%t.length)},[l,t.length]);a.useEffect(()=>{if(!l){r(0);return}r(h=>h>=t.length?t.length-1:h<0?0:h)},[l,t.length]),a.useEffect(()=>{if(!e){document.body.classList.remove("lightbox-open");return}return document.body.classList.add("lightbox-open"),()=>{document.body.classList.remove("lightbox-open")}},[e]),a.useEffect(()=>{if(e){const x=f.current;x&&x.focus({preventScroll:!0});return}const h=p.current;h&&typeof h.focus=="function"&&requestAnimationFrame(()=>{h.focus({preventScroll:!0}),p.current=null})},[e]),a.useEffect(()=>{if(!e)return;const h=x=>{x.key==="Escape"&&m()};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[e,m]),a.useEffect(()=>{if(!e||!l)return;const h=x=>{switch(x.key){case"ArrowRight":x.preventDefault(),k();break;case"ArrowLeft":x.preventDefault(),N();break;case"Home":x.preventDefault(),y(0);break;case"End":x.preventDefault(),y(t.length-1);break}};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[e,l,t.length,k,N,y]),a.useEffect(()=>{if(!e)return;const h=u.current;if(!h)return;const x=I=>{if(I.key!=="Tab")return;const C=Array.from(h.querySelectorAll(Ae)).filter(T=>!T.hasAttribute("aria-hidden"));if(C.length===0){I.preventDefault();return}const v=C[0],E=C[C.length-1],A=I.shiftKey,O=document.activeElement;!A&&O===E?(I.preventDefault(),v.focus()):A&&O===v&&(I.preventDefault(),E.focus())};return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[e]);const S=a.useCallback(h=>{if(!l)return;const x=V(h,t.length),I=t[x];if(!(I!=null&&I.original)||b.current.has(I.original))return;const C=new Image;C.src=I.original,b.current.add(I.original)},[l,t]);a.useEffect(()=>{b.current.clear(),r(0)},[n]),a.useEffect(()=>{!e||!l||(S(o),S(o+1),S(o-1))},[e,l,o,S]);const R=a.useMemo(()=>l?t[o]:null,[l,t,o]);return{isOpen:e,currentIndex:o,currentImage:R,openLightbox:d,closeLightbox:m,goToImage:y,goToNextImage:k,goToPreviousImage:N,dialogRef:u,closeButtonRef:f}}const q="hidden",ie="fixed",ae="bottom";function Se(t){const[n,e]=a.useState(q),s=a.useRef(null),o=a.useRef(null),r=a.useRef(q),u=a.useCallback(f=>{r.current!==f&&(r.current=f,e(f))},[]);return a.useEffect(()=>{if(!t){u(q);return}const f=s.current;if(!f)return;let p=!1;const b=8,l=f.querySelector(".sentinel-top"),d=f.querySelector(".sentinel-bottom");let m=!1,y=!1,k,N;const S=C=>{let v=0,E=C;for(;E;)v+=E.offsetTop||0,E=E.offsetParent;return v},R=()=>{const C=s.current;if(!C)return;const v=S(C),E=C.offsetHeight,A=v+E,O=window.scrollY||window.pageYOffset,T=window.innerHeight||document.documentElement.clientHeight,P=O+T;if(P<v){u(q);return}if(O>=A){u(q);return}if(P>=A-b){u(ae);return}u(ie)},h=()=>{p||(p=!0,requestAnimationFrame(()=>{R(),p=!1}))},x=()=>{R()};return"IntersectionObserver"in window&&l&&d&&(N=new IntersectionObserver(C=>{if(C.forEach(v=>{v.target===l&&(m=v.isIntersecting),v.target===d&&(y=v.isIntersecting)}),!m&&!y){const v=S(f),E=v+f.offsetHeight,A=window.scrollY||window.pageYOffset;if(A+(window.innerHeight||document.documentElement.clientHeight)<v||A>=E){u(q);return}}y?u(ae):m&&u(ie)},{root:null,threshold:0}),N.observe(l),N.observe(d)),window.ResizeObserver&&(k=new ResizeObserver(()=>R()),k.observe(f)),f.querySelectorAll("img").forEach(C=>{C.complete||C.addEventListener("load",R,{once:!0})}),setTimeout(R,50),setTimeout(R,200),setTimeout(R,600),R(),window.addEventListener("scroll",h,{passive:!0}),window.addEventListener("resize",x),()=>{window.removeEventListener("scroll",h),window.removeEventListener("resize",x),k&&k.disconnect(),N&&N.disconnect()}},[t,u]),{mode:n,containerRef:s,buttonRef:o}}const Oe=t=>{const n=t!=null&&t.categories?t:ve;let e=((n==null?void 0:n.categories)||[]).map(o=>G(_({},o),{images:(o.images||[]).map(r=>G(_({},r),{path:r.path||r.url||r.publicUrl||r.storageUrl||r.src||"",displayName:r.displayName||r.title||r.alt||r.filename||r.id||"Bild"}))}));return e.sort((o,r)=>{const u=Number.isFinite(Number(o.order))?Number(o.order):0,f=Number.isFinite(Number(r.order))?Number(r.order):0;return u===f?(o.name||"").localeCompare(r.name||"","sv"):u-f}),!e.some(o=>o.id==="alla")&&e.length>0&&(e=[{id:"alla",name:"Alla bilder",description:"Alla bilder från Storegården 7",images:e.flatMap(r=>(r.images||[]).map(u=>G(_({},u),{categoryId:r.id}))),order:-1},...e]),{categories:e,featured:(t==null?void 0:t.featured)||(n==null?void 0:n.featured)||null}};function Pe(){const[t,n]=a.useState("alla"),[e,s]=a.useState(!1),[o,r]=a.useState(!1),[u,f]=a.useState(null);a.useEffect(()=>{let w=!0;return xe().then(z=>{w&&f(z)}).catch(()=>{w&&f(null)}),()=>{w=!1}},[]);const p=a.useMemo(()=>Oe(u),[u]),b=a.useMemo(()=>p.categories.find(w=>w.id===t),[t,p]),l=a.useMemo(()=>b!=null&&b.images?b.images.map(w=>({original:w.path,thumbnail:w.path,description:w.displayName,originalAlt:w.displayName,thumbnailAlt:w.displayName,filename:w.filename,subcategory:w.subcategory})):[],[b]),d=a.useMemo(()=>{var te;const w=p.featured||((te=Ce)==null?void 0:te.featured)||[];if(!w||w.length===0)return[];const z=p.categories.find($=>$.id==="alla");return z?w.map($=>{const D=z.images.find(U=>U.filename===$||U.id===$||U.storageKey===$);return D?{original:D.path,thumbnail:D.path,description:D.displayName,originalAlt:D.displayName,thumbnailAlt:D.displayName,filename:D.filename,subcategory:D.subcategory}:null}).filter(Boolean):[]},[p]),{isOpen:m,currentIndex:y,currentImage:k,openLightbox:N,closeLightbox:S,goToImage:R,goToNextImage:h,goToPreviousImage:x,dialogRef:I,closeButtonRef:C}=se(d,"featured"),{isOpen:v,currentIndex:E,currentImage:A,openLightbox:O,closeLightbox:T,goToImage:P,goToNextImage:g,goToPreviousImage:j,dialogRef:L,closeButtonRef:M}=se(l,t),{mode:K,containerRef:de,buttonRef:fe}=Se(o),Z=a.useCallback(()=>{r(w=>!w)},[]),me=a.useCallback(w=>{s(!0),n(w),r(!1),T(),setTimeout(()=>{s(!1)},300)},[T]),ee=(b==null?void 0:b.name)||"Alla";return i.jsxs("div",{className:"storegarden-gallery",children:[i.jsx("div",{className:"gallery-logo-container",children:i.jsx("img",{src:we,alt:"Storegården 7",className:"gallery-logo"})}),i.jsx("h2",{id:"gallery-heading",children:"Bildgalleri"}),d.length>0&&i.jsx(ue,{images:d,onImageSelect:N}),i.jsx(ce,{categories:p.categories,activeCategory:t,onCategoryChange:me}),i.jsx(J,{images:l,isLoading:e,onImageSelect:O,categoryName:ee}),!o&&i.jsxs("button",{className:"show-more-button",onClick:Z,"aria-expanded":o,"aria-controls":"expanded-gallery","aria-label":`Visa alla ${l.length} bilder i galleriet`,children:["Visa alla bilder (",l.length,")"]}),o&&i.jsx(Q,{images:l.slice(6),startIndex:6,totalCount:l.length,onImageSelect:O,categoryName:ee,buttonMode:K,onToggle:Z,containerRef:de,buttonRef:fe}),i.jsx(X,{isOpen:m,images:d,currentIndex:y,currentImage:k,onClose:S,onNext:h,onPrevious:x,onSelectImage:R,dialogRef:I,closeButtonRef:C}),i.jsx(X,{isOpen:v,images:l,currentIndex:E,currentImage:A,onClose:T,onNext:g,onPrevious:j,onSelectImage:P,dialogRef:L,closeButtonRef:M,categories:p.categories,activeCategory:t,onCategoryChange:n})]})}export{Pe as default};
